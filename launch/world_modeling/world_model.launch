<?xml version="1.0"?>
<launch>

    <!-- Get the machine file -->
    <arg name="machine" default="localhost"/>
    <include file="$(env ROBOT_BRINGUP_PATH)/machines/$(arg machine).machine" />

    <arg name="config" default="world_modeling/world_model.yaml"/>

    <!-- World model -->
    <node name="ed" pkg="ed" type="ed" output="log" machine="$(arg machine)" />

    <!-- Configure world model -->
    <node name="ed_configure" pkg="ed" type="configure" args="$(env ROBOT_BRINGUP_PATH)/parameters/$(arg config)" output="log" machine="$(arg machine)"/>

    <group if="$(optenv ROBOT_REAL false)">

        <group ns="face">

            <node name="detector" pkg="openface_ros" type="openface_node.py" output="log" machine="$(arg machine)" />

        </group>

        <!-- Face recognition -->
        <node name="face_recognition" pkg="openface_ros" type="face_recognition2" output="log" machine="$(arg machine)">
            <rosparam command="load" file="$(env ROBOT_BRINGUP_PATH)/parameters/world_modeling/face_recognition.yaml" />
        </node>
    
        <node name="object_recognition" pkg="tensorflow_ros" type="object_recognition_node.py" output="log" machine="$(arg machine)">
            <!-- Settings file-->
            <rosparam command="load" file="$(env ROBOT_BRINGUP_PATH)/parameters/world_modeling/object_recognition.yaml" />
        </node>

    </group>
    <group unless="$(optenv ROBOT_REAL false)">

        <!-- Face recognition -->
        <node name="face_recognition" pkg="ed_perception" type="face_recognition" output="log" machine="$(arg machine)"
              args="--config $(env ROBOT_BRINGUP_PATH)/parameters/world_modeling/face_recognition.yaml" />

    </group>

</launch>
